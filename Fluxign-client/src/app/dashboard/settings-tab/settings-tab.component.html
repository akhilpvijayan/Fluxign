<!-- Wrap the entire settings tab in the same max-width container -->
<div
  class="bg-white dark:bg-[#3030301e] shadow rounded-md p-6 max-w-6xl mx-auto flex flex-col md:flex-row gap-6 border border-gray-300 dark:border-gray-600"
>
  <!-- Left navigation with animated underline -->
  <nav
    class="w-full md:w-48 relative flex md:flex-col border-b md:border-b-0 md:border-r border-gray-200 dark:border-gray-700 pb-4 md:pb-0 overflow-x-auto md:overflow-y-auto md:min-h-[200px] md:pr-2"
  >
    <ul
      class="flex md:flex-col space-x-4 md:space-x-0 md:space-y-2 relative min-w-max"
    >
      <li>
        <button
          class="w-full relative px-3 py-2 rounded-md focus:outline-none transition-colors duration-300 whitespace-nowrap hover:text-[#6bc91f] hover:bg-white/10 backdrop-blur-md text-left"
          [ngClass]="{
            'text-[#6bc91f] dark:text-[#6bc91f] font-semibold':
              settingsSection === 'general',
            'text-gray-500 dark:text-gray-400': settingsSection !== 'general'
          }"
          (click)="setSettingsSection('general'); updateSettingsUnderline()"
          #generalNav
        >
          {{ 'SETTINGS.GENERAL' | translate }}
        </button>
      </li>
      <li>
        <button
          class="w-full relative px-3 py-2 rounded-md focus:outline-none transition-colors duration-300 whitespace-nowrap hover:text-[#6bc91f] hover:bg-white/10 backdrop-blur-md text-left"
          [ngClass]="{
            'text-[#6bc91f] dark:text-[#6bc91f] font-semibold':
              settingsSection === 'appearance',
            'text-gray-500 dark:text-gray-400': settingsSection !== 'appearance'
          }"
          (click)="setSettingsSection('appearance'); updateSettingsUnderline()"
          #appearanceNav
        >
          {{ 'SETTINGS.APPEARANCE' | translate }}
        </button>
      </li>
      <li>
        <button
          class="w-full relative px-3 py-2 rounded-md focus:outline-none transition-colors duration-300 whitespace-nowrap hover:text-[#6bc91f] hover:bg-white/10 backdrop-blur-md text-left"
          [ngClass]="{
            'text-[#6bc91f] dark:text-[#6bc91f] font-semibold':
              settingsSection === 'language',
            'text-gray-500 dark:text-gray-400': settingsSection !== 'language'
          }"
          (click)="setSettingsSection('language'); updateSettingsUnderline()"
          #languageNav
        >
          {{ 'SETTINGS.LANGUAGE' | translate }}
        </button>
      </li>
      <!-- Animated underline -->
      <span
        #settingsUnderline
        class="absolute bottom-0 left-0 h-1 bg-[#6bc91f] dark:bg-[#6bc91f] rounded-t-md transition-all duration-300 ease-in-out md:bottom-auto md:left-auto md:right-0 md:top-0 md:w-1 h-full rounded-l-md"
        [ngStyle]="settingsUnderlineStyles"
      ></span>
    </ul>
  </nav>

  <!-- Right content -->
  <div class="flex-1">
    <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100">
      {{ 'SETTINGS.TITLE' | translate:{ section: ('SETTINGS.' + settingsSection.toUpperCase()) | translate } }}
    </h2>    

    <hr />
    <br />
    <div *ngIf="settingsSection === 'general'">
      <p class="text-gray-700 dark:text-gray-300 mb-4">
        {{ 'SETTINGS.GENERAL_CONTENT' | translate }}
      </p>
      <!-- Your general settings inputs here -->
    </div>

    <div *ngIf="settingsSection === 'appearance'">
      <div class="flex items-center justify-between w-full">
        <span class="text-gray-900 dark:text-gray-100 select-none">{{
          'SETTINGS.DARK_MODE' | translate
        }}</span>

        <label for="darkModeToggle" class="relative inline-flex items-center cursor-pointer">
          <input
            type="checkbox"
            id="darkModeToggle"
            class="sr-only peer"
            [(ngModel)]="isDark"
            (ngModelChange)="toggleDarkMode($event)"
          />
          <div
            class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-[#6bc91f] dark:bg-gray-700 rounded-full peer peer-checked:bg-[#6bc91f] transition-colors duration-300"
          ></div>
          <div
            class="absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-300 peer-checked:translate-x-5"
          ></div>
        </label>
      </div>
    </div>
    <div class="relative w-full md:w-1/2" *ngIf="settingsSection === 'language'" #languageDropdown>
      <label class="block mb-2 text-gray-700 dark:text-gray-300">
        {{ 'SETTINGS.SELECT_LANGUAGE' | translate }}
      </label>

      <button
        (click)="dropdownOpen = !dropdownOpen"
        class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#3030301e] text-gray-900 dark:text-gray-100 flex justify-between items-center focus:outline-none focus:ring-1 focus:ring-[#6bc91f]"
      >
        {{ selectedLanguage === 'en' ? 'English' : 'Arabic (العربية)' }}
        <svg
          class="w-4 h-4 ml-2 text-gray-400"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>

      <ul
        *ngIf="dropdownOpen"
        class="absolute z-10 mt-1 max-h-40 w-full overflow-auto rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#303030] shadow-lg"
        tabindex="-1"
      >
        <li
          class="cursor-pointer text-black dark:text-white px-4 py-2 hover:bg-[#6bc91f] hover:text-white"
          (click)="selectLanguage('en'); dropdownOpen = false"
        >
          English
        </li>
        <li
          class="cursor-pointer text-black dark:text-white px-4 py-2 hover:bg-[#6bc91f] hover:text-white"
          (click)="selectLanguage('ar'); dropdownOpen = false"
        >
          Arabic (العربية)
        </li>
      </ul>
    </div>
  </div>
</div>
